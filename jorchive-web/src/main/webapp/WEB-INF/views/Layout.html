<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Layout page</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"/>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"/>-->
    <style>
        body {
            padding-top: 70px;
        }

        .fileRow td {
            cursor: pointer;
        }

        .fileRow td:hover {
            font-weight: 600;
        }

        .collapsedRow {
            display: none;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Jorchive</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</nav>
<section layout:fragment="content" class="container">
    <p>Page content goes here</p>
</section>
<footer class="footer">
    <div class="container">
        <p layout:fragment="custom-footer">Custom footer here</p>
    </div>
</footer>
<script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="application/javascript"
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script type="application/javascript">
    $('tr.fileRow').click(function () {
        var row = $(this);
        var children = 'collapsedChildren';
        var rows = 'collapsedRow';

        /*var collapsed = row.hasClass(children);*/
        row.toggleClass(children);
        if (row.attr('data-depth') == 0) {
            row.toggleClass('info');
        }

        var subItems = $('.' + row.attr('id'));
        if (row.hasClass(children)) {
            subItems.addClass(rows);
            subItems.addClass(children);
        }
        else {
            subItems.removeClass(rows);
            subItems.removeClass(children);
        }
    });

    $('.filterBtn').click(function() {
        var btn = $(this);
        var type = btn.attr('data');
        $.ajax('/filter/' + type)
                .done(function (data) {
                    // TODO ajax this
                    location.reload();
                })
                .fail(function () {
                    btn.addClass('btn-danger');
                });
    });
</script>
</body>
</html>
